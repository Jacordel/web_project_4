!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};function t(e){e.classList.add("popup_open"),document.addEventListener("keyup",D)}function n(e){e.classList.remove("popup_open"),document.removeEventListener("keyup",D)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{DB:function(){return g},ej:function(){return D},kf:function(){return _},hh:function(){return L}});var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardData=n,this._cardTemplate=t}var n,o;return n=e,(o=[{key:"render",value:function(){this._element=this._cardTemplate.cloneNode(!0);var e=this._element.querySelector(".elements__title"),t=this._element.querySelector(".elements__image");return e.textContent=this._cardData.name,t.alt=this._cardData.name,t.src=this._cardData.link,this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__like-button").addEventListener("click",(function(){return e._handleLikeButton()})),this._element.querySelector(".elements__trash-button").addEventListener("click",(function(){return e._handleDeleteButton()})),this._element.querySelector(".elements__image").addEventListener("click",(function(){return e._handlePreviewPopup()}))}},{key:"_handleLikeButton",value:function(){this._element.querySelector(".elements__like-button").classList.toggle("elements__like-button_active")}},{key:"_handleDeleteButton",value:function(){this._element.querySelector(".elements__trash-button").parentNode.remove()}},{key:"_handlePreviewPopup",value:function(){t(_),L.src=this._cardData.link,L.alt=this._cardData.name,g.textContent=this._cardData.name}}])&&r(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(),i=o;function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._settings=t,this._form=n}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasValidInput",value:function(){return this._inputElements.every((function(e){return!0===e.validity.valid}))}},{key:"_toggleButton",value:function(){this._hasValidInput()?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):this.disableAddButton()}},{key:"_setEventListeners",value:function(){var e=this;this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((function(t){t.addEventListener("input",(function(n){e._checkInputValidity(t,e._form),e._toggleButton()}))}))}},{key:"disableAddButton",value:function(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=a,s=document.querySelector("#element-template").content.querySelector(".elements__place"),c=document.querySelectorAll(".popup"),p=document.querySelector(".popup_type_edit"),d=document.querySelector(".popup_type_add"),_=document.querySelector(".popup_type_preview"),m=document.querySelector(".popup__form_type_edit"),f=document.querySelector(".popup__form_type_add"),y=document.querySelector(".elements__grid"),h=document.querySelector(".profile__edit-button"),v=document.querySelector(".profile__add-button"),b=document.querySelector(".popup_type_edit").querySelector(".popup__close-btn"),S=document.querySelector(".popup_type_add").querySelector(".popup__close-btn"),k=document.querySelector(".popup_type_preview").querySelector(".popup__close-btn"),q=document.querySelector(".profile__name"),E=document.querySelector(".profile__profession"),L=document.querySelector(".popup__preview-image"),g=document.querySelector(".popup__figure-caption"),w=document.querySelector(".popup__input_type_name"),B=document.querySelector(".popup__input_type_about-me"),C=(document.querySelector("#add-button"),document.querySelector("#title-input")),x=document.querySelector("#image-input"),D=function(e){e.preventDefault(),function(e,t){27===e.which&&t(document.querySelector(".popup_open"))}(e,n)};b.addEventListener("click",(function(){return n(p)})),S.addEventListener("click",(function(){return n(d)})),k.addEventListener("click",(function(){return n(_)})),v.addEventListener("click",(function(){f.reset(),V[I.getAttribute("name")].disableAddButton(),t(d)})),h.addEventListener("click",(function(){w.value=q.textContent,B.value=E.textContent,t(p)}));var j,P={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},A=p.querySelector(".popup__form"),I=d.querySelector(".popup__form"),V={"edit-profile":new l(P,A),"create-card":new l(P,I)};function O(e){var t;t=new i(s,e).render(),y.prepend(t)}j=P,Array.from(document.querySelectorAll(j.formSelector)).forEach((function(e){var t=new l(j,e),n=e.getAttribute("name");V[n]=t,t.enableValidation()})),m.addEventListener("submit",(function(e){e.preventDefault(),q.textContent=w.value,E.textContent=B.value,n(p)})),f.addEventListener("submit",(function(e){e.preventDefault(),O({name:C.value,link:x.value}),n(d)})),[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].forEach((function(e){O(e)})),c.forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&n(e)}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBVzVHLEdBQ2pCTSxFQUFXTixTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvdXRpbHMvY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJpbXBvcnQgeyBoYW5kbGVFc2NVcCB9IGZyb20gXCIuLi8uLi9wYWdlcy9pbmRleC5qc1wiO1xyXG5cclxuLy8gZnVuY3Rpb25zIHRoYXQgb3Blbi9jbG9zZXMgbW9kYWwgd2luZG93cy5cclxuZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XHJcbiAgcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhhbmRsZUVzY1VwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cCkge1xyXG4gIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBoYW5kbGVFc2NVcCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IG9wZW5Qb3B1cCwgY2xvc2VQb3B1cCB9O1xyXG4iLCJpbXBvcnQgeyBwb3B1cFByZXZpZXcsIHByZXZpZXdJbWFnZUVsLCBmaWd1cmVDYXB0aW9uRWwgfSBmcm9tIFwiLi4vcGFnZXMvaW5kZXguanNcIjtcclxuaW1wb3J0IHsgb3BlblBvcHVwIH0gZnJvbSBcIi4vdXRpbHMvdXRpbC5qc1wiO1xyXG5cclxuY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoY2FyZFRlbXBsYXRlLCBjYXJkRGF0YSkge1xyXG4gICAgdGhpcy5fY2FyZERhdGEgPSBjYXJkRGF0YTtcclxuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGNhcmRUZW1wbGF0ZTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9jYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlRWwgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RpdGxlXCIpO1xyXG4gICAgY29uc3QgaW1hZ2VFbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIik7XHJcblxyXG4gICAgdGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmREYXRhLm5hbWU7XHJcbiAgICBpbWFnZUVsLmFsdCA9IHRoaXMuX2NhcmREYXRhLm5hbWU7XHJcbiAgICBpbWFnZUVsLnNyYyA9IHRoaXMuX2NhcmREYXRhLmxpbms7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RyYXNoLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZVByZXZpZXdQb3B1cCgpKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdHJhc2gtYnV0dG9uXCIpLnBhcmVudE5vZGUucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUHJldmlld1BvcHVwKCkge1xyXG4gICAgb3BlblBvcHVwKHBvcHVwUHJldmlldyk7XHJcblxyXG4gICAgcHJldmlld0ltYWdlRWwuc3JjID0gdGhpcy5fY2FyZERhdGEubGluaztcclxuICAgIHByZXZpZXdJbWFnZUVsLmFsdCA9IHRoaXMuX2NhcmREYXRhLm5hbWU7XHJcbiAgICBmaWd1cmVDYXB0aW9uRWwudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkRGF0YS5uYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvclNwYW4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpO1xyXG4gICAgZXJyb3JTcGFuLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvclNwYW4uY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvclNwYW4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzVmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgPT09IHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLl9oYXNWYWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQWRkQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCwgdGhpcy5fZm9ybSk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQWRkQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgb3BlblBvcHVwLCBjbG9zZVBvcHVwIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXRpbHMvdXRpbC5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vY29tcG9uZW50cy91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmNvbnN0IEVTQ19LRVlDT0RFID0gMjc7XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gIC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnQtdGVtcGxhdGVcIilcclxuICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19wbGFjZVwiKTtcclxuXHJcbmNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XHJcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdFwiKTtcclxuY29uc3QgcG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZFwiKTtcclxuY29uc3QgcG9wdXBQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3ByZXZpZXdcIik7XHJcbmNvbnN0IHBvcHVwRm9ybUVkaXRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdHlwZV9lZGl0XCIpO1xyXG5jb25zdCBwb3B1cEZvcm1BZGRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdHlwZV9hZGRcIik7XHJcbmNvbnN0IHBsYWNlc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19ncmlkXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdG5FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVBZGRCdG5FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgZWRpdFBvcHVwQ2xvc2VCdG5FbCA9IGRvY3VtZW50XHJcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0XCIpXHJcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKTtcclxuY29uc3QgYWRkUG9wdXBDbG9zZUJ0bkVsID0gZG9jdW1lbnRcclxuICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZFwiKVxyXG4gIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idG5cIik7XHJcbmNvbnN0IHByZXZpZXdDbG9zZUJ0bkVsID0gZG9jdW1lbnRcclxuICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3ByZXZpZXdcIilcclxuICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlUHJvZmVzc2lvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wcm9mZXNzaW9uXCIpO1xyXG5jb25zdCBwcmV2aWV3SW1hZ2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3ByZXZpZXctaW1hZ2VcIik7XHJcbmNvbnN0IGZpZ3VyZUNhcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ZpZ3VyZS1jYXB0aW9uXCIpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1OYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmNvbnN0IGVkaXRGb3JtQWJvdXRNZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9faW5wdXRfdHlwZV9hYm91dC1tZVwiXHJcbik7XHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IGltYWdlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWlucHV0XCIpO1xyXG5cclxuLy9ydW5zIGVzY2FwZSB1c2FiaWxpdHlcclxuY29uc3QgaXNFc2NFdnQgPSAoZXZ0LCBhY3Rpb24pID0+IHtcclxuICBpZiAoZXZ0LndoaWNoID09PSBFU0NfS0VZQ09ERSkge1xyXG4gICAgY29uc3QgYWN0aXZlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX29wZW5cIik7XHJcbiAgICBhY3Rpb24oYWN0aXZlUG9wdXApO1xyXG4gIH1cclxufTtcclxuLy9oYW5kbGVzIGVzY2FwZSBidXR0b25cclxuY29uc3QgaGFuZGxlRXNjVXAgPSAoZXZ0KSA9PiB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgaXNFc2NFdnQoZXZ0LCBjbG9zZVBvcHVwKTtcclxufTtcclxuXHJcbi8vZXZlbnQgbGlzdGVuZXJzIGZvciBjbG9zaW5nIHBvcHVwIGZyb20gY2xvc2UgYnV0dG9uXHJcbmVkaXRQb3B1cENsb3NlQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgY2xvc2VQb3B1cChwb3B1cEVkaXRQcm9maWxlKVxyXG4pO1xyXG5hZGRQb3B1cENsb3NlQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlUG9wdXAocG9wdXBBZGRDYXJkKSk7XHJcbnByZXZpZXdDbG9zZUJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZVBvcHVwKHBvcHVwUHJldmlldykpO1xyXG5cclxuLy9yZXNldHMgZm9ybSBhbmQgb3BlbnMgdXAgcG9wdXAgZm9yIGFkZGluZyBjYXJkXHJcbnByb2ZpbGVBZGRCdG5FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwRm9ybUFkZEVsLnJlc2V0KCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbYWRkRm9ybUVsLmdldEF0dHJpYnV0ZShcIm5hbWVcIildLmRpc2FibGVBZGRCdXR0b24oKTtcclxuICBvcGVuUG9wdXAocG9wdXBBZGRDYXJkKTtcclxufSk7XHJcblxyXG4vL3NldHMgdmFsdWVzIG9mIHByZXZpb3VzIGlucHV0cyBvZiBlZGl0IGZvcm0uXHJcbi8vdGhlbiBvcGVucyB1cCBtb2RhbFxyXG5wcm9maWxlRWRpdEJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdEZvcm1OYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZUVsLnRleHRDb250ZW50O1xyXG4gIGVkaXRGb3JtQWJvdXRNZUlucHV0LnZhbHVlID0gcHJvZmlsZVByb2Zlc3Npb25FbC50ZXh0Q29udGVudDtcclxuICBvcGVuUG9wdXAocG9wdXBFZGl0UHJvZmlsZSk7XHJcbn0pO1xyXG5cclxuLy92YWxpZGF0aW9uIHNldHRpbmdzXHJcbmNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5jb25zdCBlZGl0Rm9ybUVsID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5jb25zdCBhZGRGb3JtRWwgPSBwb3B1cEFkZENhcmQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge1xyXG4gIFwiZWRpdC1wcm9maWxlXCI6IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWRpdEZvcm1FbCksXHJcbiAgXCJjcmVhdGUtY2FyZFwiOiBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGFkZEZvcm1FbCksXHJcbn07XHJcblxyXG4vLyBlbmFibGUgdmFsaWRhdGlvblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm0pO1xyXG4gICAgY29uc3QgbmFtZSA9IGZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuXHJcbiAgICBmb3JtVmFsaWRhdG9yc1tuYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcclxuXHJcbnBvcHVwRm9ybUVkaXRFbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbnBvcHVwRm9ybUFkZEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XHJcblxyXG4vLyB0aGVzZSBhcmUgZXZlbnQgaGFuZGxlcnMgZm9yIG1vZGFsIHdpbmRvd3MuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSBlZGl0Rm9ybU5hbWVJbnB1dC52YWx1ZTtcclxuICBwcm9maWxlUHJvZmVzc2lvbkVsLnRleHRDb250ZW50ID0gZWRpdEZvcm1BYm91dE1lSW5wdXQudmFsdWU7XHJcbiAgY2xvc2VQb3B1cChwb3B1cEVkaXRQcm9maWxlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGNhcmREYXRhID0ge1xyXG4gICAgbmFtZTogdGl0bGVJbnB1dC52YWx1ZSxcclxuICAgIGxpbms6IGltYWdlSW5wdXQudmFsdWUsXHJcbiAgfTtcclxuXHJcbiAgcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgY2xvc2VQb3B1cChwb3B1cEFkZENhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmRUZW1wbGF0ZSwgY2FyZERhdGEpO1xyXG4gIGFkZENhcmQoY2FyZC5yZW5kZXIoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZENhcmQoY2FyZCkge1xyXG4gIHBsYWNlc0xpc3QucHJlcGVuZChjYXJkKTtcclxufVxyXG5cclxuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmRJdGVtKSA9PiB7XHJcbiAgcmVuZGVyQ2FyZChjYXJkSXRlbSk7XHJcbn0pO1xyXG5cclxucG9wdXBzLmZvckVhY2goKHBvcHVwKSA9PiB7XHJcbiAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBwb3B1cCkge1xyXG4gICAgICBjbG9zZVBvcHVwKHBvcHVwKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcblxyXG5leHBvcnQge1xyXG4gIHBvcHVwUHJldmlldyxcclxuICBwcmV2aWV3SW1hZ2VFbCxcclxuICBmaWd1cmVDYXB0aW9uRWwsXHJcbiAgaGFuZGxlRXNjVXAsXHJcbn07XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgeyBpbml0aWFsQ2FyZHMgfTsiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJvcGVuUG9wdXAiLCJwb3B1cCIsImNsYXNzTGlzdCIsImFkZCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUVzY1VwIiwiY2xvc2VQb3B1cCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJDYXJkIiwiY2FyZFRlbXBsYXRlIiwiY2FyZERhdGEiLCJ0aGlzIiwiX2NhcmREYXRhIiwiX2NhcmRUZW1wbGF0ZSIsIl9lbGVtZW50IiwiY2xvbmVOb2RlIiwidGl0bGVFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpbWFnZUVsIiwidGV4dENvbnRlbnQiLCJuYW1lIiwiYWx0Iiwic3JjIiwibGluayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVQcmV2aWV3UG9wdXAiLCJ0b2dnbGUiLCJwYXJlbnROb2RlIiwicG9wdXBQcmV2aWV3IiwicHJldmlld0ltYWdlRWwiLCJmaWd1cmVDYXB0aW9uRWwiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3NldHRpbmdzIiwiX2Zvcm0iLCJpbnB1dCIsImVycm9yU3BhbiIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsIl9oYXNWYWxpZElucHV0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiZGlzYWJsZUFkZEJ1dHRvbiIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uIiwicHJldmVudERlZmF1bHQiLCJjb250ZW50IiwicG9wdXBzIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwQWRkQ2FyZCIsInBvcHVwRm9ybUVkaXRFbCIsInBvcHVwRm9ybUFkZEVsIiwicGxhY2VzTGlzdCIsInByb2ZpbGVFZGl0QnRuRWwiLCJwcm9maWxlQWRkQnRuRWwiLCJlZGl0UG9wdXBDbG9zZUJ0bkVsIiwiYWRkUG9wdXBDbG9zZUJ0bkVsIiwicHJldmlld0Nsb3NlQnRuRWwiLCJwcm9maWxlTmFtZUVsIiwicHJvZmlsZVByb2Zlc3Npb25FbCIsImVkaXRGb3JtTmFtZUlucHV0IiwiZWRpdEZvcm1BYm91dE1lSW5wdXQiLCJ0aXRsZUlucHV0IiwiaW1hZ2VJbnB1dCIsImV2dCIsImFjdGlvbiIsIndoaWNoIiwiaXNFc2NFdnQiLCJyZXNldCIsImZvcm1WYWxpZGF0b3JzIiwiYWRkRm9ybUVsIiwiZ2V0QXR0cmlidXRlIiwidmFsdWUiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJlZGl0Rm9ybUVsIiwicmVuZGVyQ2FyZCIsImNhcmQiLCJyZW5kZXIiLCJwcmVwZW5kIiwidmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmRJdGVtIiwidGFyZ2V0Il0sInNvdXJjZVJvb3QiOiIifQ==